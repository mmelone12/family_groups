<div id="top_space">
</div>
<hr class="line slogan" />
<div id="content">
<%= render :partial => 'js/compose.js.erb' %>
<div class='b-compose', style='color:white; text-align:center'>
  Compose
</div>
<h3 class="inbox">YOUR INBOX</h3>

<table border="1">
  <tr>
    <th><strong>From</strong></th>
    <th><strong>Subject</strong></th>
    <th><strong>Received</strong></th>
    <th><strong>Body</strong></th>
  </tr>
  <% @messages.each do |message| %>
    <tr>
      <td><%= link_to message.author.name, message_path(message), remote: true %></td>
      <td><%= link_to message.subject.truncate(60), message_path(message), remote: true%></td>
      <td><%= link_to distance_of_time_in_words(message.created_at, Time.now), message_path(message), remote: true %> ago</td>
      <td><%= link_to message.body.truncate(100), message_path(message), remote: true %></td> 
    </tr>
  <% end %>
  </table>
  
<%= will_paginate @messages %>
    <h3 class="inbox">SENT MESSAGES</h3>

    <table border="1">
      <tr>
        <th><strong>To</strong></th>
        <th><strong>Subject</strong></th>
        <th><strong>Sent</strong></th>
        <th><strong>Body</strong></th>
      </tr>

      <% @sent_messages.each do |message| %>
        <tr>
          <td><%=h message.recipients.map(&:name).to_sentence %></td>
          <td><%= link_to h(message.subject.truncate(60)), sent_path(message) %></td>
          <td><%= distance_of_time_in_words(message.created_at, Time.now) %> ago</td>
          <td><%= link_to h(message.body.truncate(100)), sent_path(message) %></td> 
        </tr>
      <% end %>
    </table>

    <%= will_paginate @messages %>
  </div>
</div>
<hr class="line slogan" />
</div>